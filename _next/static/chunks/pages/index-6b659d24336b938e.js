(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(9306)}])},9306:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var o=r(7876),s=r(4232),a=r(7776),l=r(9798),n=r.n(l);function i(){let[e,t]=(0,s.useState)(null),[r,l]=(0,s.useState)([]),[i,d]=(0,s.useState)(""),[c,h]=(0,s.useState)([]),[p,u]=(0,s.useState)({sub:"",mode:!1,counter:0}),[m,g]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&t(JSON.parse(e));let r=e=>{x.current&&!x.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);let j=async()=>{if(!(null==e?void 0:e.token))return;let t=await fetch("https://api.rpc-shield.com/api/account",{headers:{Authorization:"Bearer ".concat(e.token)}});if(t.ok){let e=await t.json();console.log(e),e.ok&&u(e.account)}else 401==t.status&&f(),console.error("Error al obtener account");let r=await fetch("https://api.rpc-shield.com/api/pool",{headers:{Authorization:"Bearer ".concat(e.token)}});if(r.ok){let e=await r.json();e.ok&&h(e.pools)}else 401==r.status&&f(),console.error("Error al obtener pools");let o=await fetch("https://api.rpc-shield.com/api/methods",{headers:{Authorization:"Bearer ".concat(e.token)}});o.ok?l((await o.json()).methods):(401==o.status&&f(),console.error("Error al obtener m\xe9todos"))};(0,s.useEffect)(()=>{j()},[e]);let y=async e=>{let r=e.credential,o=await fetch("https://api.rpc-shield.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r})}),s=await o.json();if(s.ok){let e={...s,token:r};t(e),localStorage.setItem("user",JSON.stringify(e))}else 401==o.status&&f(),alert("Error al verificar el token")},f=()=>{t(null),l([]),localStorage.removeItem("user"),g(!1)},b=async t=>{if(e)try{let r=await fetch("https://api.rpc-shield.com/api/pool/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)}});if(!r.ok)throw 401==r.status&&f(),Error("Error al eliminar el pool");h(e=>e.filter(e=>e.id!==t))}catch(e){console.error("Error:",e),alert("Hubo un problema al eliminar el pool.")}};return(0,o.jsxs)("div",{className:n().body,children:[(0,o.jsxs)("div",{className:n().header,children:[(0,o.jsx)("div",{className:n().logo,children:"\uD83D\uDEE1️ RPC Shield"}),(0,o.jsx)("div",{style:{position:"relative"},ref:x,children:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:e.picture,alt:"Avatar",className:n().avatar,onClick:()=>g(!m)}),m&&(0,o.jsx)("div",{className:n().menu,children:(0,o.jsx)("button",{onClick:f,className:n().menuItem,children:"Cerrar sesi\xf3n"})})]}):(0,o.jsx)(a.j,{onSuccess:y,onError:()=>console.log("Error al iniciar sesi\xf3n")})})]}),e?null:(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:n().panel,children:[(0,o.jsx)("h1",{style:{marginBottom:10},children:"Bienvenido a RPC Shield"}),(0,o.jsx)("p",{style:{color:"#555"},children:"Protege tus endpoints RPC con autenticaci\xf3n segura y control de acceso inteligente."})]})}),e&&(0,o.jsxs)("div",{className:n().panel,children:[(0,o.jsx)("h2",{style:{marginBottom:10},children:"Tu cuenta"}),(0,o.jsxs)("div",{style:{marginBottom:20},children:[(0,o.jsxs)("div",{children:["Shield: ",p.mode?"Enabled":"Disabled",(0,o.jsx)("button",{onClick:async()=>{let t=p.mode?"https://api.rpc-shield.com/api/account/disable":"https://api.rpc-shield.com/api/account/enable",r=await fetch(t,{method:"GET",headers:{Authorization:"Bearer ".concat(e.token)}});r.ok?u({...p,mode:!p.mode}):(401==r.status&&f(),console.error("Error al cambiar el estado del shield"))},children:p.mode?"Desactivar Shield":"Activar Shield"})]}),(0,o.jsxs)("div",{children:["Credits: ",p.counter]}),(0,o.jsxs)("div",{children:["RPC Proxy URL: https://api.rpc-shield.com/",p.sub]})]})]}),e&&(0,o.jsxs)("div",{className:n().panel,children:[(0,o.jsx)("h2",{style:{marginBottom:10},children:"Tus pools registrados"}),(0,o.jsxs)("div",{style:{marginBottom:20},children:[(0,o.jsx)("h3",{children:"Agregar nuevo pool"}),(0,o.jsx)("input",{type:"text",placeholder:"https://nuevo-pool-url.com",value:i,onChange:e=>d(e.target.value),style:{width:"60%",padding:6,marginRight:8}}),(0,o.jsx)("button",{onClick:async()=>{if(!i)return alert("Ingrese la URL del pool");let t=await fetch("https://api.rpc-shield.com/api/pool",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)},body:JSON.stringify({url:i})});if(t.ok){let r=await t.json();r.ok?(h(t=>[...t,{id:Date.now(),sub:e.sub,url:i,counter:0}]),d("")):alert("Error: "+(r.error||"No se pudo agregar pool"))}else 401==t.status&&f(),alert("Error al agregar pool")},style:{padding:"6px 12px",cursor:"pointer"},children:"Agregar Pool"})]}),0===c.length?(0,o.jsx)("p",{children:"No hay pools registrados a\xfan."}):(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:20},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{backgroundColor:"#f0f0f0"},children:[(0,o.jsx)("th",{style:{padding:8,textAlign:"left"},children:"URL"}),(0,o.jsx)("th",{style:{padding:8},children:"Counter"}),(0,o.jsx)("th",{style:{padding:8},children:"Acciones"})," "]})}),(0,o.jsx)("tbody",{children:c.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{padding:8,textAlign:"left",wordBreak:"break-all"},children:e.url}),(0,o.jsx)("td",{style:{padding:8,textAlign:"center"},children:e.counter}),(0,o.jsx)("td",{style:{padding:8,textAlign:"center"},children:(0,o.jsx)("button",{onClick:()=>b(e.id),style:{backgroundColor:"#ff4d4f",color:"#fff",border:"none",padding:"6px 12px",borderRadius:4,cursor:"pointer"},children:"Eliminar"})})]},e.id))})]})]}),e&&(0,o.jsxs)("div",{className:n().panel,children:[(0,o.jsx)("h2",{style:{marginBottom:10},children:"Tus m\xe9todos registrados"}),0===r.length?(0,o.jsx)("p",{children:"No hay m\xe9todos registrados a\xfan."}):(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{backgroundColor:"#f0f0f0"},children:[(0,o.jsx)("th",{style:{padding:8,textAlign:"left"},children:"Method"}),(0,o.jsx)("th",{style:{padding:8,textAlign:"left"},children:"Address"}),(0,o.jsx)("th",{style:{padding:8},children:"Universal"}),(0,o.jsx)("th",{style:{padding:8},children:"Enabled"}),(0,o.jsx)("th",{style:{padding:8},children:"Counter"}),(0,o.jsx)("th",{style:{padding:8},children:"Eliminar"})]})}),(0,o.jsx)("tbody",{children:r.map(t=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{padding:8},children:t.method}),(0,o.jsx)("td",{className:n().wrapAddress,style:{padding:8},children:t.address}),(0,o.jsx)("td",{style:{padding:8,textAlign:"center"},children:(0,o.jsx)("button",{onClick:async()=>{if(!confirm("\xbfEst\xe1s seguro de que quer\xe9s permitir cualquier address en este m\xe9todo?"))return;let r=await fetch("https://api.rpc-shield.com/api/methods/universal/".concat(t.id),{method:"POST",headers:{Authorization:"Bearer ".concat(null==e?void 0:e.token)}});r.ok?j():(401==r.status&&f(),alert("Error al editar el m\xe9todo"))},style:{cursor:"pointer",color:"red"},children:"\uD83C\uDF10"})}),(0,o.jsx)("td",{style:{padding:8,textAlign:"center"},children:(0,o.jsx)("button",{onClick:async()=>{let r=t.enabled?"disable":"enable",o=await fetch("https://api.rpc-shield.com/api/methods/".concat(r,"/").concat(t.id),{method:"POST",headers:{Authorization:"Bearer ".concat(null==e?void 0:e.token)}});o.ok?l(e=>e.map(e=>e.id===t.id?{...e,enabled:!e.enabled}:e)):(401==o.status&&f(),alert("Error al cambiar estado del m\xe9todo"))},style:{cursor:"pointer"},children:t.enabled?"✅":"❌"})}),(0,o.jsx)("td",{style:{padding:8,textAlign:"center"},children:t.counter}),(0,o.jsx)("td",{style:{padding:8,textAlign:"center"},children:(0,o.jsx)("button",{onClick:async()=>{if(!confirm("\xbfEst\xe1s seguro de que quer\xe9s eliminar este m\xe9todo?"))return;let r=await fetch("https://api.rpc-shield.com/api/methods/delete/".concat(t.id),{method:"POST",headers:{Authorization:"Bearer ".concat(null==e?void 0:e.token)}});r.ok?l(e=>e.filter(e=>e.id!==t.id)):(401==r.status&&f(),alert("Error al eliminar el m\xe9todo"))},style:{cursor:"pointer",color:"red"},children:"\uD83D\uDDD1️"})})]},t.id))})]})]})]})}},9798:e=>{e.exports={body:"Home_body__Fs25I",header:"Home_header__ctR7W",logo:"Home_logo__vO_ff",avatar:"Home_avatar__hYc3P",menu:"Home_menu__gsZbv",menuItem:"Home_menuItem__Re505",panel:"Home_panel__jOEMr",truncate:"Home_truncate__3GDgf",wrapAddress:"Home_wrapAddress__Ybn6c",left:"Home_left__pcyDJ"}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6760)),_N_E=e.O()}]);